remoteTigerProxyPort: ${free.port.1}
remoteTigerServerPort: ${free.port.2}

tigerProxy:
  skipTrafficEndpointsSubscription: true
  trafficEndpoints:
    - http://localhost:${free.port.2}

servers:
  winstone:
    hostname: winstone
    source:
      - local:target/winstone.jar
    type: externalJar
    externalJarOptions:
      healthcheck: http://localhost:${free.port.0}
      workingDir: target
      arguments:
        - --httpPort=${free.port.0}
        - --webroot=.

  remoteTigerProxy:
    type: tigerProxy
    tigerProxyCfg:
      serverPort: ${tiger.remoteTigerServerPort}
      proxyCfg:
        activateRbelParsing: false
        rbelBufferSizeInMb: 0
        port: ${tiger.remoteTigerProxyPort}
        proxyRoutes:
          - from: http://winstone
            to: http://localhost:${free.port.0}
            disableRbelLogging: false
