<?xml version="1.0" encoding="UTF-8" standalone="no"?><!--
  - Copyright 2024 gematik GmbH
  -
  - Licensed under the Apache License, Version 2.0 (the "License");
  - you may not use this file except in compliance with the License.
  - You may obtain a copy of the License at
  -
  -     http://www.apache.org/licenses/LICENSE-2.0
  -
  - Unless required by applicable law or agreed to in writing, software
  - distributed under the License is distributed on an "AS IS" BASIS,
  - WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  - See the License for the specific language governing permissions and
  - limitations under the License.
  -->

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="416px" preserveAspectRatio="none" style="width:1080px;height:416px;background:#FFFFF0;" version="1.1" viewBox="0 0 1080 416" width="1080.8px" zoomAndPan="magnify"><defs><filter height="300%" id="f1m4u8wrytfnv7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.6000000000000003"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="3.2000000000000006" dy="3.2000000000000006" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" height="43.9375" rx="8" ry="8" style="stroke:#808080;stroke-width:0.8000000000000002;" width="506.4" x="283.6" y="40"/><text fill="#333333" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="346.4" x="363.6" y="70.2773">Tiger Proxy message flow</text><!--MD5=[6242ac1e116b970aef112c9a0a048842]
cluster onsiteenv--><rect fill="#FFFFF0" filter="url(#f1m4u8wrytfnv7)" height="258.4" style="stroke:#808080;stroke-width:0.8000000000000002;" width="494.4" x="556.8" y="108.3977"/><text fill="#333333" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="236.8" x="685.6" y="132.275">Test environment</text><!--MD5=[9ae811142e3356a930cf4a5d007a043c]
cluster testObjects--><rect fill="#FFFFF0" filter="url(#f1m4u8wrytfnv7)" height="157.6" style="stroke:#808080;stroke-width:0.8000000000000002;" width="171.2" x="854.4" y="163.5977"/><text fill="#333333" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="158.4" x="860.8" y="187.475">test objects</text><!--MD5=[09df03a4d2be340114bf4584dd6ebf7d]
entity reverseProxy--><rect fill="#FFFFF0" filter="url(#f1m4u8wrytfnv7)" height="37.0375" rx="8" ry="8" style="stroke:#808080;stroke-width:0.8000000000000002;" width="106.4" x="609.6" y="157.1977"/><rect fill="#FFFFF0" height="8" style="stroke:#808080;stroke-width:0.8000000000000002;" width="12" x="700" y="161.1977"/><rect fill="#FFFFF0" height="1.6" style="stroke:#808080;stroke-width:0.8000000000000002;" width="3.2" x="698.4" y="162.7977"/><rect fill="#FFFFF0" height="1.6" style="stroke:#808080;stroke-width:0.8000000000000002;" width="3.2" x="698.4" y="165.9977"/><text fill="#333333" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="74.4" x="621.6" y="183.5938">reverseProxy</text><!--MD5=[fcb652a50c0bbaa313e883088de8acb4]
entity localTigerProxy--><rect fill="#FFFFF0" filter="url(#f1m4u8wrytfnv7)" height="95.5875" rx="8" ry="8" style="stroke:#808080;stroke-width:0.8000000000000002;" width="173.6" x="576" y="235.9977"/><rect fill="#FFFFF0" height="8" style="stroke:#808080;stroke-width:0.8000000000000002;" width="12" x="733.6" y="239.9977"/><rect fill="#FFFFF0" height="1.6" style="stroke:#808080;stroke-width:0.8000000000000002;" width="3.2" x="732" y="241.5977"/><rect fill="#FFFFF0" height="1.6" style="stroke:#808080;stroke-width:0.8000000000000002;" width="3.2" x="732" y="244.7977"/><text fill="#333333" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="92" x="612.8" y="262.3938">local tiger proxy</text><text fill="#333333" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="0" x="660.4" y="275.4313"/><line style="stroke:#808080;stroke-width:0.8000000000000002;" x1="576.8" x2="748.8" y1="278.0727" y2="278.0727"/><text fill="#333333" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="0" x="660.4" y="291.6688"/><text fill="#333333" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="141.6" x="588" y="304.7063">aggregates all messages</text><text fill="#333333" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="125.6" x="596" y="317.7438">received by any proxy</text><!--MD5=[8fd7075bb5bfe32ef97c68c54e58acac]
entity testObject1--><rect fill="#FFFFF0" filter="url(#f1m4u8wrytfnv7)" height="37.0375" rx="8" ry="8" style="stroke:#808080;stroke-width:0.8000000000000002;" width="96.8" x="891.2" y="271.5977"/><rect fill="#FFFFF0" height="8" style="stroke:#808080;stroke-width:0.8000000000000002;" width="12" x="972" y="275.5977"/><rect fill="#FFFFF0" height="1.6" style="stroke:#808080;stroke-width:0.8000000000000002;" width="3.2" x="970.4" y="277.1977"/><rect fill="#FFFFF0" height="1.6" style="stroke:#808080;stroke-width:0.8000000000000002;" width="3.2" x="970.4" y="280.3977"/><text fill="#333333" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="64.8" x="903.2" y="297.9938">testObject1</text><!--MD5=[25a5ef19dce8b306aa45d78d7ff9960d]
entity testObject2--><rect fill="#FFFFF0" filter="url(#f1m4u8wrytfnv7)" height="37.0375" rx="8" ry="8" style="stroke:#808080;stroke-width:0.8000000000000002;" width="96.8" x="891.2" y="205.9977"/><rect fill="#FFFFF0" height="8" style="stroke:#808080;stroke-width:0.8000000000000002;" width="12" x="972" y="209.9977"/><rect fill="#FFFFF0" height="1.6" style="stroke:#808080;stroke-width:0.8000000000000002;" width="3.2" x="970.4" y="211.5977"/><rect fill="#FFFFF0" height="1.6" style="stroke:#808080;stroke-width:0.8000000000000002;" width="3.2" x="970.4" y="214.7977"/><text fill="#333333" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="64.8" x="903.2" y="232.3938">testObject2</text><!--MD5=[eb8835dc47a9b7b8080bd3d8d25adcb8]
entity testenvMgr--><rect fill="#90EE90" filter="url(#f1m4u8wrytfnv7)" height="50.075" rx="8" ry="8" style="stroke:#008000;stroke-width:0.8000000000000002;" width="95.2" x="85.6" y="335.1977"/><rect fill="#90EE90" height="8" style="stroke:#008000;stroke-width:0.8000000000000002;" width="12" x="164.8" y="339.1977"/><rect fill="#90EE90" height="1.6" style="stroke:#008000;stroke-width:0.8000000000000002;" width="3.2" x="163.2" y="340.7977"/><rect fill="#90EE90" height="1.6" style="stroke:#008000;stroke-width:0.8000000000000002;" width="3.2" x="163.2" y="343.9977"/><text fill="#008000" font-family="sans-serif" font-size="11.2" font-style="italic" lengthAdjust="spacing" textLength="44" x="107.2" y="361.5938">«Tiger»</text><text fill="#008000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="63.2" x="97.6" y="374.6313">testenvMgr</text><!--MD5=[147afd0dd323a4e33bd1ba79dbddeb34]
entity validationTestsuite--><rect fill="#90EE90" filter="url(#f1m4u8wrytfnv7)" height="121.6625" rx="8" ry="8" style="stroke:#008000;stroke-width:0.8000000000000002;" width="207.2" x="29.6" y="176.3977"/><rect fill="#90EE90" height="8" style="stroke:#008000;stroke-width:0.8000000000000002;" width="12" x="220.8" y="180.3977"/><rect fill="#90EE90" height="1.6" style="stroke:#008000;stroke-width:0.8000000000000002;" width="3.2" x="219.2" y="181.9977"/><rect fill="#90EE90" height="1.6" style="stroke:#008000;stroke-width:0.8000000000000002;" width="3.2" x="219.2" y="185.1977"/><text fill="#008000" font-family="sans-serif" font-size="11.2" font-style="italic" lengthAdjust="spacing" textLength="44" x="107.2" y="202.7938">«Tiger»</text><text fill="#008000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="51.2" x="103.6" y="215.8313">test suite</text><text fill="#008000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="0" x="130.8" y="228.8688"/><line style="stroke:#008000;stroke-width:0.8000000000000002;" x1="30.4" x2="236" y1="231.5102" y2="231.5102"/><text fill="#008000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="0" x="130.8" y="245.1063"/><text fill="#008000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="175.2" x="41.6" y="258.1438">triggers requests and validates</text><text fill="#008000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="151.2" x="53.6" y="271.1813">all requests and responses</text><text fill="#008000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="164.8" x="46.8" y="284.2188">received via local tiger proxy</text><!--MD5=[ee6f7b5eb9bcb03abbd8e10be7a3a031]
link validationTestsuite to localTigerProxy--><path d="M237.128,283.2697 C245.032,285.6297 252.976,287.6537 260.8,289.1977 C365.984,309.9257 489.696,303.7097 571.648,295.4537 " fill="none" id="validationTestsuite-to-localTigerProxy" style="stroke:#FF0000;stroke-width:1.6000000000000003;"/><polygon fill="#FF0000" points="575.768,295.0297,568.2769,292.5875,571.7892,295.4413,568.9355,298.9535,575.768,295.0297" style="stroke:#FF0000;stroke-width:1.6000000000000003;"/><text fill="#FF0000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="34.4" x="382" y="286.0512">http(s)</text><!--MD5=[6c87cf2fc4e32788db85dbe80146ad10]
link localTigerProxy to validationTestsuite--><path d="M575.712,273.1977 C562.944,271.7817 549.936,270.3977 537.6,269.1977 C437.16,259.4057 322.432,250.5337 241.032,244.6297 " fill="none" id="localTigerProxy-to-validationTestsuite" style="stroke:#90EE90;stroke-width:0.8000000000000002;stroke-dasharray:7.0,7.0;"/><polygon fill="#90EE90" points="236.936,244.3257,243.889,248.0319,240.9258,244.6115,244.3462,241.6483,236.936,244.3257" style="stroke:#90EE90;stroke-width:0.8000000000000002;"/><text fill="#008000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="275.2" x="261.6" y="243.6512">forwarding all messages for validation by tiger steps</text><!--MD5=[ee47515e6deab4939da6b2f616783932]
link validationTestsuite to reverseProxy--><path d="M237.056,225.1737 C347.104,212.3337 517.48,192.4617 605.328,182.2057 " fill="none" id="validationTestsuite-to-reverseProxy" style="stroke:#FF0000;stroke-width:1.6000000000000003;"/><polygon fill="#FF0000" points="609.448,181.7257,601.923,179.3901,605.4755,182.1937,602.6719,185.7461,609.448,181.7257" style="stroke:#FF0000;stroke-width:1.6000000000000003;"/><text fill="#FF0000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="34.4" x="382" y="187.6512">http(s)</text><!--MD5=[4b40d7a844c30470f7e71245e6deb859]
link testenvMgr to onsiteenv--><path d="M180.856,360.3977 C244.964,360.3977 363.878,360.3977 467.443,360.3977 C493.3343,360.3977 518.2662,360.3977 541.1426,360.3977 C544.0022,360.3977 546.8296,360.3977 549.6228,360.3977 C551.0194,360.3977 552.4074,360.3977 553.7866,360.3977 C554.4762,360.3977 555.1636,360.3977 555.8488,360.3977 " fill="none" id="testenvMgr-to-onsiteenv" style="stroke:#90EE90;stroke-width:1.6000000000000003;"/><polygon fill="#90EE90" points="555.8488,360.3977,548.6488,357.1977,551.8488,360.3977,548.6488,363.5977,555.8488,360.3977" style="stroke:#90EE90;stroke-width:1.6000000000000003;"/><text fill="#008000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="123.2" x="337.6" y="345.2512">instantiates the proxies</text><text fill="#008000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="56" x="371.2" y="357.3574">on start up</text><!--MD5=[9ba69ec421cad1443d5fa9ccbebe3954]
link reverseProxy to testObject2--><path d="M720.208,185.6377 C769.288,194.3417 839.696,206.8217 887.232,215.2537 " fill="none" id="reverseProxy-testObject2" style="stroke:#FF0000;stroke-width:1.6000000000000003;"/><polygon fill="#FF0000" points="891.184,215.9577,884.6511,211.5529,887.2451,215.2612,883.5368,217.8552,891.184,215.9577" style="stroke:#FF0000;stroke-width:1.6000000000000003;"/><polygon fill="#FF0000" points="716.008,184.8937,722.5387,189.3016,719.9466,185.5921,723.6561,182.9999,716.008,184.8937" style="stroke:#FF0000;stroke-width:1.6000000000000003;"/><text fill="#FF0000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="34.4" x="774.4" y="193.2512">http(s)</text><!--MD5=[4cc99ccdd4ee8e3a0713865c72cae27e]
reverse link localTigerProxy to reverseProxy--><path d="M662.8,231.7337 C662.8,218.2457 662.8,204.5817 662.8,194.1097 " fill="none" id="localTigerProxy-backto-reverseProxy" style="stroke:#90EE90;stroke-width:0.8000000000000002;stroke-dasharray:7.0,7.0;"/><polygon fill="#90EE90" points="662.8,235.9097,666,228.7097,662.8,231.9097,659.6,228.7097,662.8,235.9097" style="stroke:#90EE90;stroke-width:0.8000000000000002;"/><text fill="#008000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="146.4" x="580.4" y="218.6512">mesh set up / message flow</text><!--MD5=[8337fbec26b63cb1dfff8d340d121490]
link localTigerProxy to testObject1--><path d="M749.92,285.6057 C794.784,286.6457 848.144,287.8857 886.68,288.7817 " fill="none" id="localTigerProxy-to-testObject1" style="stroke:#FF0000;stroke-width:1.6000000000000003;"/><polygon fill="#FF0000" points="890.832,288.8857,883.707,285.522,886.833,288.7943,883.5608,291.9203,890.832,288.8857" style="stroke:#FF0000;stroke-width:1.6000000000000003;"/><text fill="#FF0000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="34.4" x="774.4" y="283.6512">http(s)</text><!--MD5=[e75616535428fc5ee0fbd99e65e949c5]
@startuml

!include plantuml.style

<style>
  title {
    margin 20
  }
</style>

left to right direction

title Tiger Proxy message flow

rectangle "Test environment" as onsiteenv {
    component reverseProxy

    component localTigerProxy [
      local tiger proxy

      - - - -

      aggregates all messages
      received by any proxy
    ]
    rectangle "test objects" as testObjects {
        component testObject1
        component testObject2
    }
}
component testenvMgr <<Tiger>>

component validationTestsuite <<Tiger>> [
  test suite

  - - - -

  triggers requests and validates
  all requests and responses
  received via local tiger proxy
]

validationTestsuite - -> localTigerProxy <<HTTP>> : http(s)
validationTestsuite - -> reverseProxy <<HTTP>> : http(s)

testenvMgr - -> onsiteenv : instantiates the proxies\non start up

reverseProxy <- -> testObject2 <<HTTP>> : http(s)

reverseProxy .left.> localTigerProxy : mesh set up / message flow
localTigerProxy .> validationTestsuite : forwarding all messages for validation by tiger steps

localTigerProxy - -> testObject1 <<HTTP>> : http(s)

@enduml

@startuml

<style>
root {
    Margin 30
    BackgroundColor #fffff0
    RoundCorner 20
    FontColor #333
    LineColor Gray
    BorderColor Gray
    HorizontalAlignment center
    ImagePosition center
}

title {
  FontSize 30
  Margin 0
  Padding 10 100
  BackgroundColor White
}

arrow {
    LineColor LightGreen
    FontColor Green
    LineThickness 2
}

.Package {
    BackGroundColor White
}

.Rect {
    LineColor Blue
}

.Tiger {
    BackgroundColor LightGreen
    FontColor Green
    LineColor Green
}

.Other {
    BackgroundColor LightSkyBlue
    LineColor Blue
}

.NextRelease  {
    BackgroundColor LightGray
    FontColor Gray
    LineColor Gray
}

interface {
    FontColor DarkGreen
}

.HTTP {
    LineColor Red
    FontColor Red
    LineThickness 2
}

.HTTP2 {
    LineColor transparent
}

.Current {
  BackgroundColor White
  FontColor DarkRed
}

.File {
    LineColor SlateBlue
    BackgroundColor LightSkyBlue
    FontColor SlateBlue
}

.Folder {
    FontColor Gray
    BackgroundColor White
}
</style>

<style>
  title {
    margin 20
  }
</style>

left to right direction

title Tiger Proxy message flow

rectangle "Test environment" as onsiteenv {
    component reverseProxy

    component localTigerProxy [
      local tiger proxy

      - - - -

      aggregates all messages
      received by any proxy
    ]
    rectangle "test objects" as testObjects {
        component testObject1
        component testObject2
    }
}
component testenvMgr <<Tiger>>

component validationTestsuite <<Tiger>> [
  test suite

  - - - -

  triggers requests and validates
  all requests and responses
  received via local tiger proxy
]

validationTestsuite - -> localTigerProxy <<HTTP>> : http(s)
validationTestsuite - -> reverseProxy <<HTTP>> : http(s)

testenvMgr - -> onsiteenv : instantiates the proxies\non start up

reverseProxy <- -> testObject2 <<HTTP>> : http(s)

reverseProxy .left.> localTigerProxy : mesh set up / message flow
localTigerProxy .> validationTestsuite : forwarding all messages for validation by tiger steps

localTigerProxy - -> testObject1 <<HTTP>> : http(s)

@enduml

PlantUML version 1.2022.1(Tue Feb 01 19:19:58 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>